---
import { getCollection } from 'astro:content';
import { getPropiedadPorSlug } from '@/utils/propiedades.js';
import Layout from '@/layouts/Layout.astro';
import FichaTecnica from '@/components/FichaTecnica/FichaTecnica.jsx';
import Breadcrumbs from '@/components/Breadcrumbs.jsx';

export async function getStaticPaths() {
  const propiedades = await getCollection('propiedades');
  return propiedades.map(propiedad => ({
    params: { slug: propiedad.slug },
  }));
}
 export const prerender = true;
const { slug } = Astro.params;
const propiedad = await getPropiedadPorSlug(slug);

if (!propiedad) {
  return new Response(null, {
    status: 404,
    statusText: 'No encontrado'
  });
}
---

<Layout title={propiedad.data.title}>
  <Breadcrumbs client:load pathname={Astro.url.pathname} codigo={propiedad.data.codigo} title={propiedad.data.title} />
  <FichaTecnica client:load property={propiedad.data} />
</Layout>
